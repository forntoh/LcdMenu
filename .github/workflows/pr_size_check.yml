name: PR Size Checker
on:
  pull_request_target:
    branches-ignore:
      - master

jobs:
  check_pr_size:
    name: runner / check-pr-size
    runs-on: ubuntu-latest
    steps:
      - name: Checkout target branch
        uses: actions/checkout@v4

      - name: Fetch PR branch
        run: git fetch origin +refs/pull/${{ github.event.number }}/merge

      - name: Checkout PR branch
        run: git checkout -qf FETCH_HEAD

      - uses: budougumi0617/action-pr-size-checker@v0
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          max_added_count: ${{ vars.PR_SIZE_LIMIT }}
          filter_pattern: ${{ vars.PR_SIZE_IGNORE_PATTERN }}
